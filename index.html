<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ff85a1">
    <title>ğŸ‡°ğŸ‡· 2026 é¦–çˆ¾å¥³åœ˜å°ˆå±¬App</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Quicksand:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['"Noto Sans TC"', 'sans-serif'], en: ['"Quicksand"', 'sans-serif'] },
                    colors: { brand: { pink: '#ff85a1', light: '#fff0f3', peach: '#ffc3a0', dark: '#4a4a4a', neon: '#ff2a6d' } }
                }
            }
        }
    </script>
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { background-color: #fcfcfc; overscroll-behavior-y: none; user-select: none; -webkit-user-select: none; touch-action: pan-x pan-y; }
        input, textarea, select { user-select: auto; -webkit-user-select: auto; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .page-view { display: none; animation: fadeScaleIn 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .page-view.active { display: block; }
        @keyframes fadeScaleIn { from { opacity: 0; transform: scale(0.98) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .timeline-line::before { content: ''; position: absolute; left: 2rem; top: 24px; bottom: -8px; width: 2px; background: linear-gradient(to bottom, #ffafbd 0%, #ffc3a0 100%); z-index: 0; opacity: 0.5; }
        .time-slot:last-child .timeline-line::before { display: none; }
        .star-sparkle { display: inline-block; animation: rotateStar 4s linear infinite; }
        @keyframes rotateStar { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.2); } 100% { transform: rotate(360deg) scale(1); } }
        .dragging { opacity: 0.5; transform: scale(0.98); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); z-index: 50; }
        .drag-over { border: 2px dashed #ff85a1 !important; background-color: #fff0f3 !important; padding-top: 2rem !important; transition: all 0.2s ease; }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-overlay.hidden { opacity: 0; pointer-events: none; }
        @keyframes slideUpSheet { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .modal-overlay:not(.hidden) > div:last-child { animation: slideUpSheet 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .checklist-item input:checked + div span.task-text { text-decoration: line-through; color: #9ca3af; }
        .safe-pb { padding-bottom: calc(env(safe-area-inset-bottom) + 0.5rem); }
        .safe-pt { padding-top: calc(env(safe-area-inset-top) + 2rem); }
        .fab-safe-bottom { bottom: calc(env(safe-area-inset-bottom) + 5rem); }
    </style>
</head>
<body class="text-brand-dark font-sans h-[100dvh] w-full flex flex-col overflow-hidden">

    <div id="main-scroll-container" class="flex-1 overflow-y-auto overflow-x-hidden relative w-full scrollbar-hide pb-20">
        
        <header class="bg-gradient-to-br from-[#ffafbd] via-[#ff85a1] to-[#ffc3a0] text-white safe-pt pb-10 px-6 rounded-b-[2.5rem] shadow-lg relative overflow-hidden shrink-0">
            <div class="absolute top-[-20px] left-[-20px] opacity-20 text-8xl"><i class="fas fa-compact-disc animate-[spin_10s_linear_infinite]"></i></div>
            <div class="absolute bottom-[-10px] right-[-10px] opacity-20 text-7xl"><i class="fas fa-star"></i></div>
            <div class="relative z-10 text-center">
                <h1 class="text-3xl font-black tracking-widest mb-1 drop-shadow-md font-en">SEOUL 2026</h1>
                <p class="text-white/95 font-medium text-xs flex items-center justify-center gap-2">
                    <i class="fas fa-sparkles text-yellow-200 star-sparkle"></i> å¥³åœ˜é¦–çˆ¾å·¡æ¼”å°ˆå±¬ App
                </p>
            </div>
        </header>

        <!-- 1. é¦–é  -->
        <div id="view-home" class="page-view active">
            <div class="max-w-md mx-auto px-4 -mt-6 relative z-20 space-y-4">
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 active:scale-[0.99] transition-transform">
                    <h3 class="text-xs font-bold text-gray-800 mb-3 flex items-center gap-1.5"><i class="fas fa-exchange-alt text-brand-pink"></i> åŒ¯ç‡æ›ç®— & é€€ç¨…è©¦ç®—</h3>
                    <div class="flex items-center gap-2 bg-gray-50 p-2 rounded-xl border border-gray-100 mb-2">
                        <span class="font-bold text-gray-500 text-sm pl-2">â‚©</span>
                        <input type="number" id="krw-input" placeholder="è¼¸å…¥éŸ“å…ƒé‡‘é¡" class="bg-transparent w-full outline-none font-bold text-gray-800 text-lg font-en" oninput="calculateExchange()">
                    </div>
                    <div class="flex justify-between items-center px-1">
                        <div class="text-sm font-bold text-gray-800">ç´„ <span id="twd-output" class="text-brand-pink text-xl font-black font-en">0</span> NTD</div>
                        <div id="tax-free-badge" class="text-[10px] px-2 py-1 rounded bg-gray-100 text-gray-400 font-bold transition-colors">æœªé”é€€ç¨…é–€æª»</div>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-md p-4 text-white relative overflow-hidden">
                    <i class="fas fa-plane absolute right-[-10px] bottom-[-10px] text-6xl text-white/5"></i>
                    <h3 class="text-xs font-bold text-brand-peach mb-3 tracking-widest flex items-center gap-1.5"><i class="fas fa-ticket-alt"></i> FLIGHT INFO</h3>
                    <div class="mb-3 bg-white/10 rounded-xl p-3 backdrop-blur-md border-l-2 border-brand-pink">
                        <div class="flex justify-between items-center mb-1.5"><span class="text-[10px] bg-brand-pink text-white px-2 py-0.5 rounded font-bold">å»ç¨‹ 3/1</span><span class="text-[11px] font-en font-bold text-gray-300">IT662 (è™èˆª)</span></div>
                        <div class="flex justify-between items-center"><div class="text-center"><div class="text-2xl font-black font-en">KHH</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">16:00</div></div><div class="flex-1 flex flex-col items-center px-2"><div class="text-[10px] text-gray-400 mb-1 font-en">2h 25m</div><div class="w-full h-px bg-gray-500 relative"><i class="fas fa-plane text-brand-pink absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xs"></i></div></div><div class="text-center"><div class="text-2xl font-black font-en">GMP</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">19:25</div></div></div>
                    </div>
                    <div class="mb-3 bg-white/10 rounded-xl p-3 backdrop-blur-md border-l-2 border-red-400">
                        <div class="flex justify-between items-center mb-1.5"><span class="text-[10px] bg-red-500 text-white px-2 py-0.5 rounded font-bold">å›ç¨‹ 3/6 (ä»å·)</span><span class="text-[11px] font-en font-bold text-gray-300">CI165 (è¯èˆª)</span></div>
                        <div class="flex justify-between items-center"><div class="text-center"><div class="text-2xl font-black font-en">ICN</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">12:00</div></div><div class="flex-1 flex flex-col items-center px-2"><div class="text-[10px] text-gray-400 mb-1 font-en">3h 05m</div><div class="w-full h-px bg-gray-500 relative"><i class="fas fa-plane text-red-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xs rotate-180"></i></div></div><div class="text-center"><div class="text-2xl font-black font-en">KHH</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">14:05</div></div></div>
                    </div>
                    <div class="bg-white/10 rounded-xl p-3 backdrop-blur-md border-l-2 border-blue-400">
                        <div class="flex justify-between items-center mb-1.5"><span class="text-[10px] bg-blue-500 text-white px-2 py-0.5 rounded font-bold">å›ç¨‹ 3/6 (é‡‘æµ¦)</span><span class="text-[11px] font-en font-bold text-gray-300">IT663 (è™èˆª)</span></div>
                        <div class="flex justify-between items-center"><div class="text-center"><div class="text-2xl font-black font-en">GMP</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">20:35</div></div><div class="flex-1 flex flex-col items-center px-2"><div class="text-[10px] text-gray-400 mb-1 font-en">2h 40m</div><div class="w-full h-px bg-gray-500 relative"><i class="fas fa-plane text-blue-400 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xs rotate-180"></i></div></div><div class="text-center"><div class="text-2xl font-black font-en">KHH</div><div class="text-[10px] text-gray-400 mt-0.5 font-en">22:15</div></div></div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden relative mb-10">
                    <div class="absolute right-[-10px] top-[-10px] text-5xl text-brand-pink/5"><i class="fas fa-bed"></i></div>
                    <div class="p-4 relative z-10">
                        <h3 class="text-xs font-bold text-gray-800 mb-3 flex items-center gap-1.5"><i class="fas fa-hotel text-indigo-400"></i> ä½å®¿å°èˆª</h3>
                        <div class="mb-3 pb-3 border-b border-gray-50 flex justify-between items-center gap-2">
                            <div>
                                <div class="flex items-center gap-2 mb-1"><span class="text-[10px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded font-bold border border-indigo-100">3/1</span><div class="font-bold text-gray-800 text-[14px]">Marie's house 101 hongdae</div></div>
                                <div class="text-[11px] text-gray-500"><i class="fas fa-map-marker-alt text-brand-peach w-3 text-center mr-1"></i> å¼˜å¤§ 3 è™Ÿå‡ºå£</div>
                            </div>
                        </div>
                        <div class="mb-1 flex justify-between items-center gap-2">
                            <div>
                                <div class="flex items-center gap-2 mb-1"><span class="text-[10px] bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded font-bold border border-indigo-100">3/2 - 3/6</span><div class="font-bold text-gray-800 text-[14px]">å¼˜å¤§æ°‘å®¿ (202í˜¸)</div></div>
                                <div class="text-[11px] text-gray-500 mb-0.5"><i class="fas fa-map-marker-alt text-brand-peach w-3 text-center mr-1"></i> ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬ ì„œêµë™327-19</div>
                                <div class="text-[11px] text-gray-500 ml-4">å¼˜å¤§ 7 è™Ÿå‡ºå£</div>
                            </div>
                            <button onclick="openLink(event, 'https://map.naver.com/p/search/%EC%84%9C%EC%9A%B8%ED%8A%B9%EB%B3%84%EC%8B%9C%20%EB%A7%88%ED%8F%AC%EA%B5%AC%20%EC%84%9C%EA%B5%90%EB%8F%99%20327-19')" class="w-10 h-10 shrink-0 rounded-full bg-green-50 text-green-600 flex items-center justify-center border border-green-100 active:bg-green-200 transition-colors shadow-sm"><i class="fas fa-map-marked-alt"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. è¡Œç¨‹ -->
        <div id="view-itinerary" class="page-view relative min-h-[80vh]">
            <main class="max-w-md mx-auto px-4 -mt-6 relative z-20 mb-10">
                <div class="sticky top-0 z-40 bg-[#fcfcfc]/90 backdrop-blur-xl py-2 mb-4 -mx-4 px-4 shadow-[0_4px_15px_rgba(0,0,0,0.02)] border-b border-gray-100 flex gap-1.5 overflow-x-auto scrollbar-hide" id="day-tabs-container"></div>
                <div id="daily-weather" class="bg-sky-50 rounded-2xl p-3 mb-5 flex items-center justify-between border border-sky-100 shadow-sm transition-all active:scale-[0.99]">
                    <div class="flex items-center gap-3"><div id="weather-icon" class="text-3xl drop-shadow-sm">ğŸŒ¤ï¸</div><div><div class="text-xs text-sky-700 font-bold mb-0.5">ç•¶åœ°å¤©æ°£é å ±</div><div class="text-[11px] text-sky-600">é«”æ„Ÿæº«åº¦: <span id="weather-feel" class="font-bold">2Â°C</span></div></div></div>
                    <div class="text-right"><div id="weather-temp" class="text-xl font-black font-en text-sky-800">3Â°/12Â°</div></div>
                </div>
                <div id="itinerary-list" class="bg-gray-50/50 rounded-3xl p-2 min-h-[400px]"></div>
            </main>
            <button onclick="openItineraryModal()" class="fixed fab-safe-bottom right-6 w-14 h-14 bg-brand-neon text-white rounded-full shadow-[0_4px_15px_rgba(255,42,109,0.4)] flex items-center justify-center text-2xl z-50 active:scale-90 transition-transform"><i class="fas fa-plus"></i></button>
        </div>

        <!-- 3. è¨˜å¸³ -->
        <div id="view-accounting" class="page-view relative min-h-[80vh]">
            <div class="max-w-md mx-auto px-4 -mt-6 relative z-20 mb-10">
                <div class="bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-5 text-white shadow-md relative overflow-hidden mb-5">
                    <i class="fas fa-wallet absolute right-[-10px] bottom-[-10px] text-7xl text-white/10"></i>
                    <div class="text-[11px] font-bold tracking-widest mb-1 text-emerald-100">TOTAL SPENT (KRW)</div>
                    <div class="text-3xl font-black font-en mb-1" id="total-spent-krw">â‚© 0</div>
                    <div class="text-xs text-emerald-100 font-bold">ç´„ <span id="total-spent-twd">0</span> NTD</div>
                </div>
                <div class="flex justify-between items-center mb-4 px-1">
                    <h3 class="text-sm font-bold text-gray-800"><i class="fas fa-list-ul text-emerald-500 mr-1"></i> æ¶ˆè²»ç´€éŒ„</h3>
                    <button onclick="openExpenseModal()" class="text-[11px] bg-emerald-50 text-emerald-600 px-3 py-1.5 rounded font-bold border border-emerald-100 shadow-sm active:bg-emerald-200 transition-colors"><i class="fas fa-plus mr-1"></i> æ–°å¢</button>
                </div>
                <div id="expense-list" class="space-y-2.5 pb-16"></div>
            </div>
        </div>

        <!-- 4. æ¸…å–® -->
        <div id="view-checklist" class="page-view">
            <div class="max-w-md mx-auto px-4 -mt-6 relative z-20 mb-10 pb-16" id="checklist-container"></div>
        </div>

        <!-- 5. æ‰“å¡ -->
        <div id="view-checkin" class="page-view">
            <div class="max-w-md mx-auto px-4 -mt-6 relative z-20 mb-10 pb-16" id="checkin-container"></div>
        </div>

    </div> <!-- End scroll container -->

    <!-- Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-2xl border-t border-gray-100 shadow-[0_-10px_30px_rgba(0,0,0,0.03)] z-50 safe-pb pt-2 px-2 shrink-0">
        <div class="max-w-md mx-auto flex justify-between">
            <button onclick="switchTab('home')" id="tab-home" class="nav-btn flex flex-col items-center gap-1 text-brand-pink font-bold w-[20%] transition-colors active:scale-95"><i class="fas fa-home text-xl mb-0.5"></i><span class="text-[10px] tracking-widest">é¦–é </span></button>
            <button onclick="switchTab('itinerary')" id="tab-itinerary" class="nav-btn flex flex-col items-center gap-1 text-gray-400 font-medium w-[20%] transition-colors active:scale-95"><i class="fas fa-map-marked-alt text-xl mb-0.5"></i><span class="text-[10px] tracking-widest">è¡Œç¨‹</span></button>
            <button onclick="switchTab('accounting')" id="tab-accounting" class="nav-btn flex flex-col items-center gap-1 text-gray-400 font-medium w-[20%] transition-colors active:scale-95"><i class="fas fa-calculator text-xl mb-0.5"></i><span class="text-[10px] tracking-widest">è¨˜å¸³</span></button>
            <button onclick="switchTab('checklist')" id="tab-checklist" class="nav-btn flex flex-col items-center gap-1 text-gray-400 font-medium w-[20%] transition-colors active:scale-95"><i class="fas fa-clipboard-check text-xl mb-0.5"></i><span class="text-[10px] tracking-widest">æ¸…å–®</span></button>
            <button onclick="switchTab('checkin')" id="tab-checkin" class="nav-btn flex flex-col items-center gap-1 text-gray-400 font-medium w-[20%] transition-colors active:scale-95"><i class="fas fa-map-pin text-xl mb-0.5"></i><span class="text-[10px] tracking-widest">æ‰“å¡</span></button>
        </div>
    </nav>

    <!-- Modals -->
    <div id="itinerary-modal" class="modal-overlay hidden fixed inset-0 z-[100] flex items-end sm:items-center justify-center">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity" onclick="closeItineraryModal()"></div>
        <div class="bg-white w-full max-w-md rounded-t-[2rem] sm:rounded-3xl p-6 pb-safe relative z-10 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-5 sm:hidden"></div>
            <h2 id="modal-title" class="text-lg font-bold text-gray-800 mb-5 flex items-center gap-2"><i class="fas fa-edit text-brand-pink"></i> æ–°å¢è¡Œç¨‹</h2>
            <form id="itinerary-form" onsubmit="saveItinerary(event)" class="space-y-4">
                <input type="hidden" id="item-id">
                <div class="grid grid-cols-2 gap-3">
                    <div><label class="block text-[11px] font-bold text-gray-500 mb-1">æ™‚é–“</label><input type="time" id="item-time" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-brand-pink text-sm font-en font-bold"></div>
                    <div><label class="block text-[11px] font-bold text-gray-500 mb-1">åˆ†é¡</label><select id="item-category" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-brand-pink text-sm font-bold"><option value="æ™¯é»">ğŸ“ æ™¯é»</option><option value="ä½å®¿">ğŸ¨ ä½å®¿</option><option value="ç¾é£Ÿ">ğŸ½ï¸ ç¾é£Ÿ</option><option value="è³¼ç‰©">ğŸ›ï¸ è³¼ç‰©</option><option value="èˆªç­">âœˆï¸ èˆªç­</option><option value="äº¤é€š">ğŸš‡ äº¤é€š</option><option value="å…¶ä»–">ğŸ“Œ å…¶ä»–</option></select></div>
                </div>
                <div><label class="block text-[11px] font-bold text-gray-500 mb-1">è¡Œç¨‹åç¨± <span class="text-red-400">*</span></label><input type="text" id="item-title" required placeholder="ä¾‹å¦‚ï¼šæ˜æ´æ›éŒ¢æ‰€" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-brand-pink text-sm font-bold"></div>
                <div><label class="block text-[11px] font-bold text-gray-500 mb-1">Naver Map å°èˆªé€£çµ (é¸å¡«)</label><input type="url" id="item-map" placeholder="è²¼ä¸Š Naver Map ç¶²å€" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-brand-pink text-sm text-blue-500"></div>
                <div><label class="block text-[11px] font-bold text-gray-500 mb-1">ç‡Ÿæ¥­æ™‚é–“ / å‚™è¨»</label><textarea id="item-notes" rows="2" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-brand-pink text-sm"></textarea></div>
                <div class="flex gap-3 mt-6 pt-2">
                    <button type="button" id="btn-delete" onclick="deleteItineraryItem()" class="hidden px-5 py-3.5 bg-red-50 text-red-600 rounded-xl font-bold text-sm active:scale-95"><i class="fas fa-trash-alt"></i></button>
                    <button type="button" onclick="closeItineraryModal()" class="flex-1 py-3.5 bg-gray-100 text-gray-600 rounded-xl font-bold text-sm active:scale-95">å–æ¶ˆ</button>
                    <button type="submit" class="flex-1 py-3.5 bg-brand-pink text-white rounded-xl font-bold text-sm shadow-md active:scale-95">å„²å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <div id="expense-modal" class="modal-overlay hidden fixed inset-0 z-[100] flex items-end sm:items-center justify-center">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity" onclick="closeExpenseModal()"></div>
        <div class="bg-white w-full max-w-md rounded-t-[2rem] sm:rounded-3xl p-6 pb-safe relative z-10 shadow-2xl">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-5 sm:hidden"></div>
            <h2 id="expense-modal-title" class="text-lg font-bold text-gray-800 mb-5 flex items-center gap-2"><i class="fas fa-receipt text-emerald-500"></i> æ–°å¢æ¶ˆè²»</h2>
            <form id="expense-form" onsubmit="saveExpense(event)" class="space-y-4">
                <input type="hidden" id="exp-id">
                <div class="bg-gray-50 p-3 rounded-xl border border-gray-200 flex items-center gap-2"><span class="font-bold text-gray-500 text-lg pl-2">â‚©</span><input type="number" id="exp-amount" required placeholder="éŸ“å…ƒé‡‘é¡" class="bg-transparent w-full outline-none font-black text-gray-800 text-2xl font-en py-1"></div>
                <div class="grid grid-cols-2 gap-3">
                    <div><label class="block text-[11px] font-bold text-gray-500 mb-1">æ—¥æœŸ <span class="text-red-400">*</span></label><input type="date" id="exp-date" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-emerald-500 text-sm font-bold text-gray-700"></div>
                    <div><label class="block text-[11px] font-bold text-gray-500 mb-1">åˆ†é¡</label><select id="exp-category" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-emerald-500 text-sm font-bold text-gray-700"><option value="ç¾é£Ÿ">ğŸ½ï¸ ç¾é£Ÿ</option><option value="è³¼ç‰©">ğŸ›ï¸ è³¼ç‰©</option><option value="äº¤é€š">ğŸš‡ äº¤é€š</option><option value="ä½å®¿">ğŸ¨ ä½å®¿</option><option value="å…¶ä»–">ğŸ“Œ å…¶ä»–</option></select></div>
                </div>
                <div><label class="block text-[11px] font-bold text-gray-500 mb-1">æ¶ˆè²»é …ç›® <span class="text-red-400">*</span></label><input type="text" id="exp-name" required placeholder="ä¾‹å¦‚ï¼šOlive Young è³¼ç‰©" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-emerald-500 text-sm font-bold text-gray-700"></div>
                <div class="flex gap-3 mt-6 pt-2">
                    <button type="button" id="exp-delete-btn" onclick="deleteExpense()" class="hidden px-5 py-3.5 bg-red-50 text-red-600 rounded-xl font-bold text-sm active:scale-95"><i class="fas fa-trash-alt"></i></button>
                    <button type="button" onclick="closeExpenseModal()" class="flex-1 py-3.5 bg-gray-100 text-gray-600 rounded-xl font-bold text-sm active:scale-95">å–æ¶ˆ</button>
                    <button type="submit" class="flex-1 py-3.5 bg-emerald-500 text-white rounded-xl font-bold text-sm shadow-md active:scale-95">å„²å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        let currentDay = 1; const totalDays = 6; const exchangeRate = 0.0235;
        function openLink(e, url) { e.preventDefault(); e.stopPropagation(); window.open(url, '_blank'); }

        const weatherData = { 1: { date: '3/1', temp: '3Â°/12Â°', feel: '2Â°C', icon: 'ğŸŒ¤ï¸' }, 2: { date: '3/2', temp: '4Â°/9Â°', feel: '1Â°C', icon: 'ğŸŒ¨ï¸' }, 3: { date: '3/3', temp: '3Â°/12Â°', feel: '1Â°C', icon: 'ğŸŒ¨ï¸' }, 4: { date: '3/4', temp: '2Â°/10Â°', feel: '-1Â°C', icon: 'â›…' }, 5: { date: '3/5', temp: '0Â°/6Â°', feel: '-3Â°C', icon: 'â„ï¸' }, 6: { date: '3/6', temp: '-1Â°/6Â°', feel: '-4Â°C', icon: 'ğŸŒ¨ï¸' } };
        const categoryStyles = { 'æ™¯é»': { bg: 'bg-green-50', text: 'text-green-600', border: 'border-green-100', icon: 'fa-map-marker-alt' }, 'ä½å®¿': { bg: 'bg-indigo-50', text: 'text-indigo-600', border: 'border-indigo-100', icon: 'fa-hotel' }, 'ç¾é£Ÿ': { bg: 'bg-red-50', text: 'text-red-500', border: 'border-red-100', icon: 'fa-utensils' }, 'è³¼ç‰©': { bg: 'bg-blue-50', text: 'text-blue-500', border: 'border-blue-100', icon: 'fa-shopping-bag' }, 'èˆªç­': { bg: 'bg-gray-800', text: 'text-white', border: 'border-gray-700', icon: 'fa-plane' }, 'äº¤é€š': { bg: 'bg-emerald-50', text: 'text-emerald-600', border: 'border-emerald-100', icon: 'fa-subway' }, 'å…¶ä»–': { bg: 'bg-gray-100', text: 'text-gray-600', border: 'border-gray-200', icon: 'fa-tag' } };
        const expenseCategoryStyles = { 'ç¾é£Ÿ': { bg: 'bg-orange-100', text: 'text-orange-500', icon: 'fa-utensils' }, 'è³¼ç‰©': { bg: 'bg-blue-100', text: 'text-blue-500', icon: 'fa-shopping-bag' }, 'äº¤é€š': { bg: 'bg-emerald-100', text: 'text-emerald-500', icon: 'fa-subway' }, 'ä½å®¿': { bg: 'bg-indigo-100', text: 'text-indigo-500', icon: 'fa-hotel' }, 'å…¶ä»–': { bg: 'bg-gray-200', text: 'text-gray-600', icon: 'fa-receipt' } };

        const checklistDefinition = [
            { icon: 'fa-bullhorn', color: 'text-brand-pink', title: 'ç¶“ç´€å…¬å¸è¡Œå‰é€šçŸ¥', desc: 'è«‹å„ä½åœ˜å“¡æ–¼å‡ºç™¼å‰ï¼Œç¢ºå¯¦å‹¾é¸ä»¥ä¸‹æ¸…å–®ã€‚è­·ç…§èˆ‡ç°½è­‰æ–‡ä»¶è«‹å‹™å¿…åè¦†ç¢ºèªï¼', isNotice: true },
            { icon: 'fa-passport', color: 'text-blue-500', title: 'å®˜æ–¹å‡ºç™¼æ–‡ä»¶', items: ['chk-doc-1|å¡«å¯« K-ETA æˆ– Arrival card'] },
            { icon: 'fa-mobile-alt', color: 'text-brand-pink', title: 'å¿…å‚™ Apps', items: ['chk-app-1|Naver Map (éŸ“åœ‹ç¥ç´šå°èˆª)', 'chk-app-2|Papago (ç²¾æº–ç¿»è­¯)'] },
            { isDivider: true, text: 'è¡Œææ¸…å–®åˆ†é¡' },
            { icon: 'fa-id-card', color: 'text-amber-500', title: 'é‡è¦è­‰ä»¶ / ç‰©å“', items: ['chk-lug-doc-1|è­·ç…§', 'chk-lug-doc-2|èº«åˆ†è­‰', 'chk-lug-doc-3|å°å¹£ / éŸ“å¹£', 'chk-lug-doc-4|å¯¦é«”ä¿¡ç”¨å¡ (éœ€é–‹é€šæµ·å¤–åˆ·å¡)'] },
            { icon: 'fa-tshirt', color: 'text-indigo-400', title: 'æœè£', items: ['chk-lug-clo-1|æ´‹è”¥å¼ä¿æš–è¡£ç‰© (å®¤å…§æš–æ°£å¼·)', 'chk-lug-clo-2|é˜²é¢¨å¤–å¥— / å¤§è¡£ / ç™¼ç†±è¡£', 'chk-lug-clo-3|ç„¡æ•µè€èµ°é‹ (æ—¥èµ°å…©è¬æ­¥å¿…å‚™)', 'chk-lug-clo-4|å…§è¡£è¤² / è¥ªå­ / ç¡è¡£', 'chk-lug-clo-5|å¸½å­ / åœå·¾', 'chk-lug-clo-6|å¤ªé™½çœ¼é¡'] },
            { icon: 'fa-plug', color: 'text-gray-500', title: 'é›»å­ç”¢å“', items: ['chk-lug-ele-1|è½‰æ¥é ­ (éŸ“åœ‹ç‚ºé›™åœ“å­” 220V)', 'chk-lug-ele-2|è¡Œå‹•é›»æº (ä¸å¯è¶…é2å€‹ï¼Œè¦Whæ¨™ç¤º)', 'chk-lug-ele-3|å……é›»ç·š', 'chk-lug-ele-4|è€³æ©Ÿ'] },
            { icon: 'fa-bath', color: 'text-teal-500', title: 'ç”Ÿæ´»ç”¨å“', items: ['chk-lug-lif-1|å€‹äººå¸¸å‚™è—¥ (æ„Ÿå†’/è…¸èƒƒ/æ­¢ç—›/éæ•)', 'chk-lug-lif-2|é¢ç´™ / æ¿•ç´™å·¾', 'chk-lug-lif-3|è¼•ä¾¿é›¨å‚˜ / æŠ˜ç–Šè³¼ç‰©è¢‹', 'chk-lug-lif-4|æ²æµ´ / æ´—é«® / æ½¤é«®', 'chk-lug-lif-5|ç‰™åˆ· / ç‰™è† / ç‰™ç·š', 'chk-lug-lif-6|éš±çœ¼ä¿é¤Šæ¶²'] },
            { icon: 'fa-spa', color: 'text-pink-400', title: 'åŒ–å¦å“ / ä¿é¤Šå“', items: ['chk-lug-bea-1|ä¿æ¿•ä¿é¤Šå“æ—…è¡Œçµ„ (éŸ“åœ‹åä¹¾)', 'chk-lug-bea-2|è­·å”‡è† / è­·æ‰‹éœœ / èº«é«”ä¹³', 'chk-lug-bea-3|é˜²æ›¬ä¹³ / å€‹äººå½©å¦å“', 'chk-lug-bea-4|å¸å¦ç”¨å“ / æ´—é¢ä¹³', 'chk-lug-bea-5|é¢è†œ'] },
            { icon: 'fa-star', color: 'text-yellow-400', title: 'å…¶ä»–', items: ['chk-lug-oth-1|é ¸æ• (æ­æ©Ÿç”¨)', 'chk-lug-oth-2|ä¿å†·è¢‹ (æ©Ÿå ´è¶…å•†è²·å†·è—ç”¨)', 'chk-lug-oth-3|ç©ºè¡Œæè¢‹ (å‚™ç”¨è£æˆ°åˆ©å“)', 'chk-lug-oth-4|è¡£ç‰©å£“ç¸®è¢‹', 'chk-lug-oth-5|å£“ç¸®æ©Ÿ', 'chk-lug-oth-6|è¡Œæç§¤'] }
        ];

        const checkinDefinition = [
            { dayTitle: "Day 1 | 3/1 (æ—¥) å¼˜å¤§ç·©è¡æ—¥", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d1-f1|æ©‹æ‘ç‚¸é› (Kyochon) å¼˜å¤§åº—ï¼ˆå®µå¤œé¦–é¸ï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d1-s1|Olive Young å¼˜å¤§æ——è‰¦åº—", "chk-d1-s2|Daiso (å¤§å‰µ) å¼˜å¤§ 2 è™Ÿåº—"] } ] },
            { dayTitle: "ğŸ“… Day 2 | 3/2 (ä¸€) æ›åŒ¯ Ã— ç‰›è‚‹æ’ Ã— å—æ±å¤§é–€å¤œæˆ°", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d2-f1|æ–°æ‘è¾£ç‡‰ç‰›è‚‹æ’ (ì†Œì‹ ì´ì˜)ï¼ˆåˆé¤ï¼‰", "chk-d2-f2|é™³ç‰è¯ä¸€éš»é›ï¼ˆæ™šé¤ï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d2-s1|å—å¤§é–€ç«¥è£è¡—", "chk-d2-s2|TNF (The North Face) ç™½æ¨™", "chk-d2-s3|Musinsa Standard", "chk-d2-s4|Covernat", "chk-d2-s5|KODAK", "chk-d2-s6|MUSINSA Kicks", "chk-d2-s7|Nyunyuï¼ˆæ±å¤§é–€é£¾å“ï¼‰", "chk-d2-s8|Bucks & Leatherï¼ˆAPM PLACE B207ï¼‰"] }, { title: "ã€è¡Œã€‘é‡è¦ç›®æ¨™", icon: "fa-map-marker-alt", color: "text-green-500", items: ["chk-d2-a1|Sky / ä¸€å“é¦™æ›éŒ¢æ‰€ï¼ˆ10:00 æº–æ™‚æ›åŒ¯ï¼‰"] } ] },
            { dayTitle: "ğŸ“… Day 3 | 3/3 (äºŒ) è–æ°´æ´å…¨æ—¥ä¸»æˆ°å ´", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d3-f1|è€å¥¶å¥¶èœè­œ (Halmoni Recipe)ï¼ˆåˆé¤ï¼‰", "chk-d3-f2|Standard Breadï¼ˆå¤–å¸¶ç„¦ç³–æ³•å¼åå¸ï¼‰", "chk-d3-f3|é»‘è™ç‹¼ (Heukhorang)ï¼ˆæ™šé¤ï¼‰", "chk-d3-f4|ç¥–å‚³ä¸‰ä»£é¦¬éˆ´è–¯æ’éª¨æ¹¯ï¼ˆå®µå¤œï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d3-s1|ADER ERROR", "chk-d3-s2|Stand Oil", "chk-d3-s3|Fennec", "chk-d3-s4|Blue Elephant", "chk-d3-s5|Tamburins", "chk-d3-s6|Hetras", "chk-d3-s7|Matin Kim", "chk-d3-s8|emis", "chk-d3-s9|Kith", "chk-d3-s10|Granhand (è–æ°´åº—)", "chk-d3-s11|Beaker", "chk-d3-s12|LCDC Seoul", "chk-d3-s13|è–æ°´æ´æœ€å¤§ OLIVE YOUNG"] } ] },
            { dayTitle: "ğŸ“… Day 4 | 3/4 (ä¸‰) å®‰åœ‹æ•£ç­– Ã— æ¼¢å—æ´ä¸»æˆ°å ´", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d4-f1|Cafe Onion Angukï¼ˆæ™¨é–“å’–å•¡ï¼‰", "chk-d4-f2|Artist Bakeryï¼ˆå¤–å¸¶é¹½å¯é Œï¼‰", "chk-d4-f3|London Bagel Museumï¼ˆå¿…åƒè²æœï¼‰", "chk-d4-f4|åœŸä¿—æ‘è”˜é›æ¹¯ï¼ˆåˆé¤ï¼‰", "chk-d4-f5|é»¨ (Ggupdang) æ–°æ²™åº—ï¼ˆæ™šé¤çƒ¤è‚‰ï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d4-s1|Mardi Mercredi", "chk-d4-s2|MARITHÃ‰", "chk-d4-s3|EMIS (æ¼¢å—æ——è‰¦åº—)", "chk-d4-s4|Granhand", "chk-d4-s5|Nonfiction", "chk-d4-s6|SW19", "chk-d4-s7|Rockfish Weatherwear"] } ] },
            { dayTitle: "ğŸ“… Day 5 | 3/5 (å››) æ±Ÿå—é†«ç¾ Ã— ç‹é·—äº­å³¶å±±", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d5-f1|Milky Shop (ç‹é·—äº­åº—)ï¼ˆç”œé»å¤–å¸¶ï¼‰", "chk-d5-f2|å»£è—å¸‚å ´ï¼ˆç”Ÿç‰›è‚‰ã€ç¶ è±†é¤…ï¼‰", "chk-d5-f3|çƒé”é‡Œå®¶é†¬èŸ¹ (å¼˜å¤§)ï¼ˆå®µå¤œï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d5-s1|Human Made", "chk-d5-s2|Supreme", "chk-d5-s3|StÃ¼ssy", "chk-d5-s4|Gentle Monster / Haus Dosan", "chk-d5-s5|Verish", "chk-d5-s6|Alo", "chk-d5-s7|Wiggle Wiggle", "chk-d5-s8|Kream", "chk-d5-s9|Le Labo / Loe / Pesade / Sisao", "chk-d5-s10|Worksout"] }, { title: "ã€è¡Œã€‘é‡é»è¡Œç¨‹", icon: "fa-map-marker-alt", color: "text-green-500", items: ["chk-d5-a1|æ±Ÿå—/æ–°æ²™é†«ç¾è¡Œç¨‹"] } ] },
            { dayTitle: "ğŸ“… Day 6 | 3/6 (äº”) å»¶å—æ´å„ªé›…æ”¶å°¾", sections: [ { title: "ã€é£Ÿã€‘æ‰“å¡é»", icon: "fa-utensils", color: "text-orange-500", items: ["chk-d6-f1|ç„¡å¢å±‹ (ë¬´êµ¬ì˜¥) å»¶å—åº—ï¼ˆ11:30 æ—©åˆé¤ï¼‰"] }, { title: "ã€è³¼ã€‘æ‰“å¡é»", icon: "fa-shopping-bag", color: "text-blue-500", items: ["chk-d6-s1|æ¨‚å¤©è¶…å¸‚ / E-martï¼ˆæ¡è³¼ä¼´æ‰‹ç¦®ã€å’–å•¡ã€èŒ¶åŒ…ã€ç‡’é…’ï¼‰"] } ] }
        ];

        const defaultItineraryData = {
            1: [
                { id: '1-1', time: '19:25', category: 'èˆªç­', title: 'æŠµé”é‡‘æµ¦æ©Ÿå ´ (IT662)', map: '', notes: '' },
                { id: '1-2', time: '21:00', category: 'ä½å®¿', title: 'æŠµé”ä½å®¿ Marie\'s house 101', map: '', notes: 'æ”¾è¡Œæç¨ä½œä¼‘æ¯' },
                { id: '1-3', time: '21:30', category: 'ç¾é£Ÿ', title: 'æ©‹æ‘ç‚¸é› (Kyochon)', map: 'https://map.naver.com/p/search/%EA%B5%90%EC%B4%8C%EC%B9%98%ED%82%A8%20%ED%99%8D%EB%8C%80%EC%A0%90', notes: 'å®µå¤œï¼šå¼˜å¤§å…¥å£ç«™ 9 è™Ÿå‡ºå£' },
                { id: '1-4', time: '22:30', category: 'è³¼ç‰©', title: 'å¼˜å¤§å¤œé–“è³¼ç‰©', map: '', notes: 'Olive Young æ——è‰¦åº— (è‡³23:00)ã€Daiso å¼˜å¤§2è™Ÿåº— (è‡³22:30æ³¨æ„æ™‚é–“)ã€å¼˜å¤§é£¾å“è¡—(i am joyã€æ™‚ç©ºé–“)' }
            ],
            2: [
                { id: '2-1', time: '10:00', category: 'å…¶ä»–', title: 'æ˜æ´æ›éŒ¢', map: 'https://map.naver.com/p/search/%EB%AA%85%EB%8F%99%20%EC%8A%A4%EC%B9%B4%EC%9D%B4%ED%99%98%EC%A0%84%EC%86%8C', notes: 'Sky æ›éŒ¢æ‰€ã€ä¸€å“é¦™æ›éŒ¢æ‰€' },
                { id: '2-2', time: '12:00', category: 'ç¾é£Ÿ', title: 'æ–°æ‘è¾£ç‡‰ç‰›è‚‹æ’', map: 'https://map.naver.com/p/search/%EC%86%8C%EC%8B%A0%EC%9D%B4%EC%8F%98', notes: 'ì†Œì‹ ì´ì˜ (æ–°æ‘ç«™)' },
                { id: '2-3', time: '14:00', category: 'è³¼ç‰©', title: 'å—å¤§é–€è³¼ç‰©', map: '', notes: 'å—å¤§é–€ç«¥è£è¡— (Mammaã€Pikachuã€Apple ç­‰)' },
                { id: '2-4', time: '16:00', category: 'è³¼ç‰©', title: 'æ˜æ´/æ±å¤§é–€ä¸»æˆ°å ´', map: '', notes: 'TNF ç™½æ¨™ã€Musinsa Standardã€Covernatã€KODAKã€MUSINSA Kicksã€Nyunyu(é£¾å“)ã€è—¥å±€' },
                { id: '2-5', time: '20:00', category: 'ç¾é£Ÿ', title: 'é™³ç‰è¯ä¸€éš»é›', map: 'https://map.naver.com/p/search/%EC%A7%84%EC%98%A5%ED%99%94%ED%95%A0%EB%A7%A4%EC%9B%90%EC%A1%B0%EB%8B%AD%ED%95%9C%EB%A7%88%EB%A6%AC', notes: 'æ±å¤§é–€ 9 è™Ÿå‡ºå£' },
                { id: '2-6', time: '22:00', category: 'è³¼ç‰©', title: 'æ±å¤§é–€å¤œæˆ°', map: 'https://map.naver.com/p/search/apm%20place', notes: 'æ±å¤§é–€ APM Place (åŒ…å« Bucks & Leather B207 æ«ƒä½)' }
            ],
            3: [
                { id: '3-1', time: '11:30', category: 'ç¾é£Ÿ', title: 'è€å¥¶å¥¶èœè­œ (Halmoni Recipe)', map: 'https://map.naver.com/p/search/%ED%95%A0%EB%A4%BC%EB%8B%88%EC%9D%98%20%EB%A0%88%EC%8B%9C%ED%94%BC', notes: 'åˆé¤' },
                { id: '3-2', time: '13:00', category: 'è³¼ç‰©', title: 'è–æ°´æ´ä¸»æˆ°å ´', map: '', notes: 'ADER ERROR, Stand Oil, Fennec, Blue Elephant, Tamburins, Hetras, Matin Kim, emis, Kith, Granhand, Beaker, LCDC, è–æ°´æœ€å¤§OLIVE YOUNG' },
                { id: '3-3', time: '15:30', category: 'ç¾é£Ÿ', title: 'Standard Bread', map: 'https://map.naver.com/p/search/%EC%8A%A4%ED%83%A0%EB%8B%A4%EB%93%9C%20%EB%B8%8C%EB%A0%88%EB%93%9C', notes: 'æ’æ——ï¼šå¤–å¸¶ç„¦ç³–æ³•å¼åå¸' },
                { id: '3-4', time: '18:40', category: 'ç¾é£Ÿ', title: 'é»‘è™ç‹¼ (Heukhorang)', map: 'https://map.naver.com/p/search/%ED%9D%91%ED%98%B8%EB%9E%91%20%EC%84%B1%EC%88%98', notes: 'æ™šé¤' },
                { id: '3-5', time: '21:00', category: 'ç¾é£Ÿ', title: 'ç¥–å‚³ä¸‰ä»£é¦¬éˆ´è–¯æ’éª¨æ¹¯', map: 'https://map.naver.com/p/search/%EC%86%8C%EB%AC%B8%EB%82%9C%EC%84%B1%EC%88%98%EA%B0%90%EC%9E%90%ED%83%95', notes: 'å®µå¤œ (24å°æ™‚ç‡Ÿæ¥­)' }
            ],
            4: [
                { id: '4-1', time: '08:00', category: 'æ™¯é»', title: 'London Bagel Museum', map: 'https://map.naver.com/p/search/London%20Bagel%20Museum%20Anguk', notes: 'å…ˆæŠ½è™Ÿç¢¼ç‰Œ (å®‰åœ‹åº—)' },
                { id: '4-2', time: '08:15', category: 'ç¾é£Ÿ', title: 'Artist Bakery', map: 'https://map.naver.com/p/search/%EC%95%84%ED%8B%B0%EC%8A%A4%ED%8A%B8%20%EB%B2%A0%EC%9D%B4%EC%BB%A4%EB%A6%AC', notes: 'ç›´æ¥å¤–å¸¶é¹½å¯é Œ' },
                { id: '4-3', time: '08:30', category: 'ç¾é£Ÿ', title: 'Cafe Onion Anguk', map: 'https://map.naver.com/p/search/Cafe%20Onion%20Anguk', notes: 'å…§ç”¨äº«å—éŸ“å±‹æ°›åœ' },
                { id: '4-4', time: '10:30', category: 'ç¾é£Ÿ', title: 'London Bagel Museum', map: 'https://map.naver.com/p/search/London%20Bagel%20Museum%20Anguk', notes: 'é è¨ˆå…¥å ´ç”¨é¤' },
                { id: '4-5', time: '12:30', category: 'ç¾é£Ÿ', title: 'åœŸä¿—æ‘è”˜é›æ¹¯', map: 'https://map.naver.com/p/search/%ED%86%A0%EC%86%8D%EC%B4%8C%20%EC%82%BC%EA%B3%84%ED%83%95', notes: 'åˆé¤ (æ­¥è¡Œç´„ 10-15 åˆ†é˜)' },
                { id: '4-6', time: '14:30', category: 'è³¼ç‰©', title: 'æ¼¢å—æ´ä¸»æˆ°å ´', map: '', notes: 'Mardi, MARITHÃ‰, EMIS, Granhand, Nonfiction, SW19, Rockfish' },
                { id: '4-7', time: '19:30', category: 'ç¾é£Ÿ', title: 'è€ƒé»¨ (Ggupdang) æ–°æ²™åº—', map: 'https://map.naver.com/p/search/%EA%BF%89%EB%8B%B9%20%EC%8B%A0%EC%82%AC', notes: 'æ™šé¤ (æ–°æ²™ç«™ 5 è™Ÿå‡ºå£)' }
            ],
            5: [
                { id: '5-1', time: '11:30', category: 'å…¶ä»–', title: 'æ±Ÿå—/æ–°æ²™é†«ç¾', map: 'https://map.naver.com/p/search/%EA%B0%95%EB%82%A8%EC%97%AD%20%ED%94%BC%EB%B6%80%EA%B3%BC', notes: 'åœ°éµ 2 è™Ÿç·š/3 è™Ÿç·š' },
                { id: '5-2', time: '15:00', category: 'è³¼ç‰©', title: 'ç‹é·—äº­/å³¶å±±å•†åœˆ', map: '', notes: 'Human Made, Supreme, StÃ¼ssy, Gentle Monster, Verish, Alo, Wiggle Wiggle, Kream, Le Labo, Loe, Pesade, Sisao, Worksout' },
                { id: '5-3', time: '16:30', category: 'ç¾é£Ÿ', title: 'Milky Shop (ç‹é·—äº­åº—)', map: 'https://map.naver.com/p/search/%EB%B0%80%ED%82%A4%EC%83%B5%20%EC%95%95%EA%B5%AC%EC%A0%95', notes: 'æ’æ——æ™‚é–“' },
                { id: '5-4', time: '18:00', category: 'ç¾é£Ÿ', title: 'å»£è—å¸‚å ´', map: 'https://map.naver.com/p/search/%EA%B4%91%EC%9E%A5%EC%8B%9C%EC%9E%A5', notes: 'æ™šé¤ (ç”Ÿç‰›è‚‰ã€ç¶ è±†é¤…)' },
                { id: '5-5', time: '20:30', category: 'ç¾é£Ÿ', title: 'çƒé”é‡Œå®¶é†¬èŸ¹ (å¼˜å¤§)', map: 'https://map.naver.com/p/search/%EC%98%A4%EB%8B%A4%EB%A6%AC%EC%A7%91%20%ED%99%8D%EB%8C%80', notes: 'æ™šé¤/å®µå¤œ' }
            ],
            6: [
                { id: '6-1', time: '09:30', category: 'è³¼ç‰©', title: 'æ¨‚å¤©è¶…å¸‚ æˆ– E-mart', map: '', notes: 'è£œè²¨æ™‚é–“' },
                { id: '6-2', time: '11:30', category: 'ç¾é£Ÿ', title: 'ç„¡å¢å±‹ (ë¬´êµ¬ì˜¥) å»¶å—åº—', map: 'https://map.naver.com/p/search/%EB%AC%B4%EA%B5%AC%EC%98%A5', notes: 'æ—©åˆé¤ (11:30 é–‹é–€)' },
                { id: '6-3', time: '12:00', category: 'èˆªç­', title: 'ä»å·å°åˆ†éšŠæ­æ©Ÿ', map: '', notes: 'æ­ä¹˜è¯èˆª CI165' },
                { id: '6-4', time: '13:30', category: 'è³¼ç‰©', title: 'å¼˜å¤§æœ€å¾Œè£œè²¨', map: '', notes: 'è³¼è²·é›¶é£Ÿã€æ³¡éºµã€å’–å•¡ã€èŒ¶åŒ…ã€ç‡’é…’' },
                { id: '6-5', time: '20:35', category: 'èˆªç­', title: 'é‡‘æµ¦å°åˆ†éšŠæ­æ©Ÿ', map: '', notes: 'æ­ä¹˜è™èˆª IT663' }
            ]
        };

        const DATA_VERSION = 'v_app_native_v2_final'; 
        if (localStorage.getItem('appDataVersion') !== DATA_VERSION) {
            localStorage.setItem('seoulAppItinerary', JSON.stringify(defaultItineraryData));
            localStorage.setItem('appDataVersion', DATA_VERSION);
        }

        let itineraryData = JSON.parse(localStorage.getItem('seoulAppItinerary')) || defaultItineraryData;
        let expensesData = JSON.parse(localStorage.getItem('seoulAppExpenses')) || [];
        let checklistState = JSON.parse(localStorage.getItem('seoulAppChecklist')) || {};
        let checkinState = JSON.parse(localStorage.getItem('seoulAppCheckin')) || {};

        // å¼·åˆ¶å¯«å…¥ä¿è­·æ©Ÿåˆ¶ï¼šé¿å… iOS åˆ·æ‰ App æ™‚éºå¤±æš«å­˜
        window.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') {
                localStorage.setItem('seoulAppChecklist', JSON.stringify(checklistState));
                localStorage.setItem('seoulAppCheckin', JSON.stringify(checkinState));
                localStorage.setItem('seoulAppItinerary', JSON.stringify(itineraryData));
                localStorage.setItem('seoulAppExpenses', JSON.stringify(expensesData));
            }
        });

        // --- 2. è¦–åœ–èˆ‡é ç±¤åˆ‡æ› ---
        function switchTab(tabId) {
            document.querySelectorAll('.page-view').forEach(view => view.classList.remove('active'));
            document.getElementById('view-' + tabId).classList.add('active');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-brand-pink', 'font-bold');
                btn.classList.add('text-gray-400', 'font-medium');
            });
            
            const activeBtn = document.getElementById('tab-' + tabId);
            activeBtn.classList.remove('text-gray-400', 'font-medium');
            activeBtn.classList.add('text-brand-pink', 'font-bold');
            
            document.getElementById('main-scroll-container').scrollTo({ top: 0, behavior: 'smooth' });

            if(tabId === 'itinerary') { renderDayTabs(); renderItinerary(); }
            if(tabId === 'accounting') { renderExpenses(); }
            if(tabId === 'checklist') { renderChecklist(); }
            if(tabId === 'checkin') { renderCheckin(); }
        }

        function renderDayTabs() {
            const container = document.getElementById('day-tabs-container');
            container.innerHTML = '';
            for (let i = 1; i <= totalDays; i++) {
                const isActive = i === currentDay;
                const btn = document.createElement('button');
                btn.className = `px-5 py-2.5 rounded-full text-[13px] font-bold whitespace-nowrap transition-all flex-shrink-0 active:scale-95 ${isActive ? 'bg-brand-pink text-white shadow-md' : 'bg-white text-gray-500 border border-gray-100 shadow-sm'}`;
                btn.innerHTML = `Day ${i} <span class="font-normal opacity-90 ml-0.5">${weatherData[i].date}</span>`;
                btn.onclick = () => { currentDay = i; renderDayTabs(); renderItinerary(); btn.scrollIntoView({behavior: 'smooth', inline: 'center', block: 'nearest'}); };
                container.appendChild(btn);
            }
            updateWeatherWidget();
        }

        function updateWeatherWidget() {
            const w = weatherData[currentDay];
            document.getElementById('weather-icon').textContent = w.icon;
            document.getElementById('weather-temp').textContent = w.temp;
            document.getElementById('weather-feel').textContent = w.feel;
        }

        function renderItinerary() {
            const list = document.getElementById('itinerary-list');
            const dayData = itineraryData[currentDay] || [];
            dayData.sort((a, b) => a.time.localeCompare(b.time));

            if (dayData.length === 0) {
                list.innerHTML = `<div class="text-center py-10 text-gray-400 text-sm"><i class="fas fa-box-open text-4xl mb-3 opacity-30 block"></i>ç•¶æ—¥å°šæœªå®‰æ’è¡Œç¨‹</div>`;
                return;
            }

            let html = '';
            dayData.forEach((item, index) => {
                const style = categoryStyles[item.category] || categoryStyles['å…¶ä»–'];
                const hasNotes = item.notes && item.notes.trim() !== '';
                const hasMap = item.map && item.map.trim() !== '';

                html += `
                <div class="time-slot relative timeline-line flex gap-3 mb-5" draggable="true" ondragstart="dragStart(event, ${index})" ondragover="dragOver(event)" ondrop="drop(event, ${index})" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                    <div class="w-12 text-right shrink-0 relative z-10 pt-2.5"><div class="font-en font-bold text-brand-dark text-[14px] bg-[#fcfcfc] py-0.5 shadow-sm rounded">${item.time}</div></div>
                    <div class="relative z-10 flex-1 bg-white p-4 rounded-2xl shadow-sm border border-gray-100 cursor-move active:bg-gray-50 transition-colors group" onclick="openItineraryModal('${item.id}')">
                        <div class="flex justify-between items-start mb-2">
                            <span class="inline-block ${style.bg} ${style.text} text-[10px] px-2 py-0.5 rounded font-bold border ${style.border} tracking-widest"><i class="fas ${style.icon} mr-1"></i>${item.category}</span>
                            <i class="fas fa-bars text-gray-200 text-xs mt-1"></i>
                        </div>
                        <div class="text-gray-800 font-bold text-[16px] leading-snug w-[85%]">${item.title}</div>
                        ${hasNotes ? `<div class="mt-3 pt-3 border-t border-gray-50"><div class="text-xs text-gray-500 font-medium leading-relaxed">${item.notes}</div></div>` : ''}
                        ${hasMap ? `<button onclick="openLink(event, '${item.map}')" class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-green-50 text-green-600 flex items-center justify-center border border-green-100 shadow-sm active:bg-green-200 transition-colors"><i class="fas fa-map-marked-alt text-[15px]"></i></button>` : ''}
                    </div>
                </div>`;
            });
            list.innerHTML = `<div class="pt-2">${html}</div>`;
        }

        let draggedIndex = null;
        function dragStart(e, index) { draggedIndex = index; e.dataTransfer.effectAllowed = 'move'; setTimeout(() => e.target.classList.add('dragging'), 0); }
        function dragOver(e) { e.preventDefault(); e.dataTransfer.dropEffect = 'move'; }
        function dragEnter(e) { e.preventDefault(); const slot = e.target.closest('.time-slot'); if(slot) slot.classList.add('drag-over'); }
        function dragLeave(e) { const slot = e.target.closest('.time-slot'); if(slot) slot.classList.remove('drag-over'); }
        function drop(e, targetIndex) {
            e.preventDefault();
            document.querySelectorAll('.time-slot').forEach(el => { el.classList.remove('dragging', 'drag-over'); });
            if (draggedIndex === null || draggedIndex === targetIndex) return;
            const dayData = itineraryData[currentDay];
            const item = dayData.splice(draggedIndex, 1)[0];
            dayData.splice(targetIndex, 0, item);
            localStorage.setItem('seoulAppItinerary', JSON.stringify(itineraryData));
            renderItinerary();
        }

        function openItineraryModal(itemId = null) {
            const form = document.getElementById('itinerary-form'); form.reset();
            if (itemId) {
                document.getElementById('modal-title').innerHTML = '<i class="fas fa-edit text-brand-pink"></i> ç·¨è¼¯è¡Œç¨‹';
                document.getElementById('btn-delete').classList.remove('hidden');
                const item = itineraryData[currentDay].find(i => i.id === itemId);
                if(item) {
                    document.getElementById('item-id').value = item.id;
                    document.getElementById('item-time').value = item.time;
                    document.getElementById('item-category').value = item.category;
                    document.getElementById('item-title').value = item.title;
                    document.getElementById('item-map').value = item.map || '';
                    document.getElementById('item-notes').value = item.notes || '';
                }
            } else {
                document.getElementById('modal-title').innerHTML = '<i class="fas fa-plus-circle text-brand-pink"></i> æ–°å¢è¡Œç¨‹';
                document.getElementById('btn-delete').classList.add('hidden');
                document.getElementById('item-id').value = '';
                document.getElementById('item-time').value = '12:00';
            }
            document.getElementById('itinerary-modal').classList.remove('hidden');
        }

        function closeItineraryModal() { document.getElementById('itinerary-modal').classList.add('hidden'); }

        function saveItinerary(e) {
            e.preventDefault();
            const id = document.getElementById('item-id').value;
            const newItem = {
                id: id || Date.now().toString(),
                time: document.getElementById('item-time').value,
                category: document.getElementById('item-category').value,
                title: document.getElementById('item-title').value,
                map: document.getElementById('item-map').value,
                notes: document.getElementById('item-notes').value
            };
            if (id) {
                const index = itineraryData[currentDay].findIndex(i => i.id === id);
                if(index !== -1) itineraryData[currentDay][index] = newItem;
            } else {
                if(!itineraryData[currentDay]) itineraryData[currentDay] = [];
                itineraryData[currentDay].push(newItem);
            }
            localStorage.setItem('seoulAppItinerary', JSON.stringify(itineraryData));
            renderItinerary(); closeItineraryModal();
        }

        function deleteItineraryItem() {
            const id = document.getElementById('item-id').value;
            if(!id) return;
            if(confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹è¡Œç¨‹å—ï¼Ÿ')) {
                itineraryData[currentDay] = itineraryData[currentDay].filter(i => i.id !== id);
                localStorage.setItem('seoulAppItinerary', JSON.stringify(itineraryData));
                renderItinerary(); closeItineraryModal();
            }
        }

        function getFormattedDate(date) {
            const d = new Date(date);
            let month = '' + (d.getMonth() + 1); let day = '' + d.getDate(); const year = d.getFullYear();
            if (month.length < 2) month = '0' + month; if (day.length < 2) day = '0' + day;
            return [year, month, day].join('-');
        }
        
        function getDisplayDate(dateString) {
            if(!dateString) return '';
            const parts = dateString.split('-');
            if(parts.length === 3) return `${parseInt(parts[1])}/${parseInt(parts[2])}`;
            return dateString;
        }

        function renderExpenses() {
            const list = document.getElementById('expense-list');
            let totalKRW = 0; let html = '';
            const sortedExpenses = [...expensesData].sort((a, b) => {
                const dateA = new Date(a.date || a.timestamp).getTime();
                const dateB = new Date(b.date || b.timestamp).getTime();
                if (dateA !== dateB) return dateB - dateA;
                return b.timestamp - a.timestamp;
            });
            if (sortedExpenses.length === 0) {
                list.innerHTML = `<div class="text-center py-10 text-gray-400 text-sm"><i class="fas fa-receipt text-4xl mb-3 opacity-30 block"></i>å°šæœªè¨˜éŒ„ä»»ä½•èŠ±è²»</div>`;
            } else {
                sortedExpenses.forEach(exp => {
                    totalKRW += Number(exp.amount);
                    const style = expenseCategoryStyles[exp.category] || expenseCategoryStyles['å…¶ä»–'];
                    const displayDate = exp.date ? getDisplayDate(exp.date) : '';
                    html += `
                    <div class="bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex justify-between items-center cursor-pointer active:bg-gray-50 transition-colors" onclick="openExpenseModal('${exp.id}')">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 rounded-full ${style.bg} ${style.text} flex items-center justify-center text-lg shadow-inner shrink-0"><i class="fas ${style.icon}"></i></div>
                            <div class="overflow-hidden">
                                <div class="text-[16px] font-bold text-gray-800 truncate mb-1">${exp.name}</div>
                                <div class="text-xs text-gray-400 flex items-center gap-1.5"><span class="bg-gray-100 px-2 py-0.5 rounded">${exp.category}</span>${displayDate ? `<span class="text-gray-400"><i class="far fa-calendar-alt mr-1"></i>${displayDate}</span>` : ''}</div>
                            </div>
                        </div>
                        <div class="font-black text-gray-800 font-en text-xl tracking-tight shrink-0 ml-2">â‚© ${Number(exp.amount).toLocaleString()}</div>
                    </div>`;
                });
                list.innerHTML = html;
            }
            document.getElementById('total-spent-krw').innerText = `â‚© ${totalKRW.toLocaleString()}`;
            document.getElementById('total-spent-twd').innerText = Math.round(totalKRW * exchangeRate).toLocaleString();
        }

        function openExpenseModal(id = null) {
            const form = document.getElementById('expense-form'); form.reset();
            document.getElementById('exp-date').value = getFormattedDate(new Date());
            if (id) {
                document.getElementById('expense-modal-title').innerHTML = '<i class="fas fa-edit text-emerald-500"></i> ç·¨è¼¯æ¶ˆè²»';
                document.getElementById('exp-delete-btn').classList.remove('hidden');
                const exp = expensesData.find(e => e.id === id);
                if (exp) {
                    document.getElementById('exp-id').value = exp.id;
                    document.getElementById('exp-amount').value = exp.amount;
                    document.getElementById('exp-name').value = exp.name;
                    document.getElementById('exp-category').value = exp.category;
                    document.getElementById('exp-date').value = exp.date || getFormattedDate(new Date());
                }
            } else {
                document.getElementById('expense-modal-title').innerHTML = '<i class="fas fa-receipt text-emerald-500"></i> æ–°å¢æ¶ˆè²»';
                document.getElementById('exp-delete-btn').classList.add('hidden');
                document.getElementById('exp-id').value = '';
            }
            document.getElementById('expense-modal').classList.remove('hidden');
        }

        function closeExpenseModal() { document.getElementById('expense-modal').classList.add('hidden'); }

        function saveExpense(e) {
            e.preventDefault();
            const id = document.getElementById('exp-id').value;
            const newExp = { id: id || Date.now().toString(), amount: document.getElementById('exp-amount').value, name: document.getElementById('exp-name').value, category: document.getElementById('exp-category').value, date: document.getElementById('exp-date').value, timestamp: id ? expensesData.find(e => e.id === id).timestamp : Date.now() };
            if (id) { const index = expensesData.findIndex(e => e.id === id); if(index !== -1) expensesData[index] = newExp; } 
            else { expensesData.push(newExp); }
            localStorage.setItem('seoulAppExpenses', JSON.stringify(expensesData));
            renderExpenses(); closeExpenseModal();
        }

        function deleteExpense() {
            const id = document.getElementById('exp-id').value;
            if(!id) return;
            if(confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†ç´€éŒ„å—ï¼Ÿ')) {
                expensesData = expensesData.filter(e => e.id !== id);
                localStorage.setItem('seoulAppExpenses', JSON.stringify(expensesData));
                renderExpenses(); closeExpenseModal();
            }
        }

        function calculateExchange() {
            const krw = parseFloat(document.getElementById('krw-input').value);
            const out = document.getElementById('twd-output');
            const badge = document.getElementById('tax-free-badge');
            if (isNaN(krw) || krw <= 0) { out.textContent = '0'; badge.className = 'text-[10px] px-2 py-1 rounded bg-gray-100 text-gray-400 font-bold'; badge.textContent = 'æœªé”é€€ç¨…é–€æª»'; return; }
            out.textContent = Math.round(krw * exchangeRate).toLocaleString();
            if (krw >= 15000) { badge.className = 'text-[10px] px-2 py-1 rounded bg-red-50 text-red-500 font-bold border border-red-100 animate-pulse'; badge.textContent = 'âœ¨ é”é€€ç¨…é–€æª»ï¼'; } 
            else { badge.className = 'text-[10px] px-2 py-1 rounded bg-gray-100 text-gray-400 font-bold'; badge.textContent = `å·® â‚©${(15000 - krw).toLocaleString()} é€€ç¨…`; }
        }

        function renderChecklist() {
            const container = document.getElementById('checklist-container');
            let html = '';
            checklistDefinition.forEach(block => {
                if(block.isNotice) {
                    html += `<div class="bg-[#2a2a2a] border border-gray-800 rounded-2xl p-4 shadow-lg relative overflow-hidden"><div class="absolute right-[-10px] top-[-10px] text-6xl text-brand-pink/20 transform rotate-12"><i class="fas ${block.icon}"></i></div><h3 class="text-brand-pink font-bold mb-2 flex items-center gap-2 relative z-10 text-[13px] tracking-wider"><i class="fas fa-exclamation-circle animate-pulse"></i> ${block.title}</h3><p class="text-gray-300 text-xs leading-relaxed relative z-10">${block.desc}</p></div>`;
                } else if(block.isDivider) {
                    html += `<div class="flex items-center gap-2 my-6 px-1"><div class="h-px bg-gray-200 flex-1"></div><h3 class="text-sm font-black text-gray-400 tracking-widest"><i class="fas fa-suitcase-rolling mr-1"></i> ${block.text}</h3><div class="h-px bg-gray-200 flex-1"></div></div>`;
                } else {
                    let itemsHtml = block.items.map(item => {
                        const [id, label] = item.split('|');
                        const isChecked = checklistState[id] ? 'checked' : '';
                        return `<label class="checklist-item flex items-start gap-3 cursor-pointer group py-1"><input type="checkbox" id="${id}" ${isChecked} class="mt-1 w-5 h-5 rounded-md border-gray-300 text-brand-pink focus:ring-brand-pink transition-all" onchange="saveChecklist(this)"><div class="flex-1"><span class="task-text text-[14px] text-gray-700 font-medium transition-colors">${label}</span></div></label>`;
                    }).join('');
                    html += `<div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-4"><h4 class="font-bold text-gray-800 mb-3 text-sm flex items-center gap-2 border-b border-gray-50 pb-2"><i class="fas ${block.icon} ${block.color}"></i> ${block.title}</h4><div class="space-y-2">${itemsHtml}</div></div>`;
                }
            });
            container.innerHTML = html;
        }

        function saveChecklist(checkbox) {
            if(checkbox) { checklistState[checkbox.id] = checkbox.checked; localStorage.setItem('seoulAppChecklist', JSON.stringify(checklistState)); }
        }

        function renderCheckin() {
            const container = document.getElementById('checkin-container');
            let html = `<div class="bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl p-4 shadow-lg relative overflow-hidden mb-6 text-white"><div class="absolute right-[-10px] top-[-10px] text-6xl text-white/10 transform rotate-12"><i class="fas fa-map-pin"></i></div><h3 class="font-bold mb-2 flex items-center gap-2 relative z-10 text-[14px] tracking-wider"><i class="fas fa-flag-checkered animate-pulse text-yellow-300"></i> å·¡æ¼”å¿…å‚™æ‰“å¡æ¸…å–®</h3><p class="text-white/90 text-xs leading-relaxed relative z-10">åƒå¥½è²·æ»¿ä¸ç•™éºæ†¾ï¼æ¯æ”»ä¸‹ä¸€å€‹åœ°æ¨™ï¼Œå°±éœ¸æ°£åœ°å‹¾ä¸‹å»å§ï¼</p></div>`;

            checkinDefinition.forEach(day => {
                html += `<div class="mb-8"><div class="flex items-center gap-2 mb-3 px-1"><div class="w-1.5 h-4 bg-brand-pink rounded-full"></div><h3 class="text-sm font-black text-gray-700 tracking-wider">${day.dayTitle}</h3></div>`;
                day.sections.forEach(sec => {
                    let itemsHtml = sec.items.map(item => {
                        const [id, label] = item.split('|');
                        const isChecked = checkinState[id] ? 'checked' : '';
                        return `<label class="checklist-item flex items-start gap-3 cursor-pointer group py-1"><input type="checkbox" id="${id}" ${isChecked} class="mt-1 w-5 h-5 rounded-md border-gray-300 text-brand-pink focus:ring-brand-pink transition-all" onchange="saveCheckin(this)"><div class="flex-1"><span class="task-text text-[14px] text-gray-700 font-bold transition-colors">${label}</span></div></label>`;
                    }).join('');
                    html += `<div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 mb-3"><h4 class="font-bold text-gray-800 mb-3 text-xs flex items-center gap-2 border-b border-gray-50 pb-2"><i class="fas ${sec.icon} ${sec.color}"></i> ${sec.title}</h4><div class="space-y-2">${itemsHtml}</div></div>`;
                });
                html += `</div>`;
            });
            container.innerHTML = html;
        }

        function saveCheckin(checkbox) {
            if(checkbox) { checkinState[checkbox.id] = checkbox.checked; localStorage.setItem('seoulAppCheckin', JSON.stringify(checkinState)); }
        }

        window.onload = () => { renderDayTabs(); renderExpenses(); renderChecklist(); renderCheckin(); }
    </script>
</body>
</html>